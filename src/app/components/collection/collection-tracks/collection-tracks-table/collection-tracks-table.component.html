<div class="h-100 w-100 d-flex flex-column">
    <div class="h-24px d-flex flex-row align-items-center justify-content-between">
        <div class="d-flex flex-row align-items-center">
            <div class="mr-2 accent-color">{{ this.tracks.tracks.length }}</div>
            <div *ngIf="this.tracks.tracks.length === 1">{{ 'song' | translate }}</div>
            <div *ngIf="this.tracks.tracks.length !== 1">{{ 'songs' | translate }}</div>
        </div>
        <i
            class="las la-columns secondary-text pointer"
            (click)="this.showEditColumnsDialogAsync()"
            matTooltip="{{ 'edit-columns' | translate }}"
        ></i>
    </div>
    <div class="mt-3 scrollbar-gutter-stable-y">
        <table class="tracks-table no-select">
            <tr class="tracks-table-header">
                <td class="pointer secondary-text ellipsis">{{ 'title' | translate }}</td>
                <td class="w-48px pointer"></td>
                <td class="w-84px pointer" *ngIf="this.tracksColumnsVisibility.showRating">
                    <div class="secondary-text ellipsis ml-1">{{ 'rating' | translate }}</div>
                </td>
                <td class="pointer secondary-text ellipsis" *ngIf="this.tracksColumnsVisibility.showArtists">
                    {{ 'artists' | translate }}
                </td>
                <td class="pointer secondary-text ellipsis" *ngIf="this.tracksColumnsVisibility.showAlbum">{{ 'album' | translate }}</td>
                <td class="pointer secondary-text ellipsis" *ngIf="this.tracksColumnsVisibility.showGenres">{{ 'genres' | translate }}</td>
                <td class="w-56px pointer" *ngIf="this.tracksColumnsVisibility.showDuration">
                    <i class="secondary-text las la-clock"></i>
                </td>
                <td class="w-56px pointer secondary-text text-align-right-important" *ngIf="this.tracksColumnsVisibility.showNumber">#</td>
                <td class="w-56px pointer secondary-text ellipsis" *ngIf="this.tracksColumnsVisibility.showYear">
                    {{ 'year' | translate }}
                </td>
                <td class="w-56px pointer secondary-text ellipsis" *ngIf="this.tracksColumnsVisibility.showPlayCount">
                    {{ 'plays' | translate }}
                </td>
                <td class="w-56px pointer secondary-text ellipsis" *ngIf="this.tracksColumnsVisibility.showSkipCount">
                    {{ 'skips' | translate }}
                </td>
                <td class="pointer secondary-text ellipsis" *ngIf="this.tracksColumnsVisibility.showDateLastPlayed">
                    {{ 'last-played' | translate }}
                </td>
                <td class="pointer secondary-text ellipsis" *ngIf="this.tracksColumnsVisibility.showDateAdded">
                    {{ 'date-added' | translate }}
                </td>
            </tr>
        </table>
    </div>

    <cdk-virtual-scroll-viewport class="flex-grow scrollbar-gutter-stable-y mt-2" itemSize="28">
        <table class="tracks-table no-select">
            <tr
                *cdkVirtualFor="let track of this.orderedTracks"
                class="tracks-table-row"
                [ngClass]="{ 'selected-item-background-important': track.isSelected }"
                (mousedown)="setSelectedTracks($event, track)"
                (dblclick)="playbackService.enqueueAndPlayTracks(this.orderedTracks, track)"
            >
                <td>
                    <div class="ellipsis" [ngClass]="{ 'accent-color': track.isPlaying }">
                        {{ track.title }}
                    </div>
                </td>
                <td class="w-48px">
                    <app-playback-indicator *ngIf="track.isPlaying" [isSelected]="track.isSelected"></app-playback-indicator>
                </td>
                <td class="w-84px" *ngIf="this.tracksColumnsVisibility.showRating"><app-rating [track]="track"></app-rating></td>
                <td *ngIf="this.tracksColumnsVisibility.showArtists">
                    <div class="ellipsis" [ngClass]="{ 'accent-color': track.isPlaying }">
                        {{ track.artists }}
                    </div>
                </td>
                <td *ngIf="this.tracksColumnsVisibility.showAlbum">
                    <div class="ellipsis" [ngClass]="{ 'accent-color': track.isPlaying }">
                        {{ track.albumTitle }}
                    </div>
                </td>
                <td *ngIf="this.tracksColumnsVisibility.showGenre">
                    <div class="ellipsis" [ngClass]="{ 'accent-color': track.isPlaying }">
                        {{ track.genres }}
                    </div>
                </td>
                <td class="w-56px" *ngIf="this.tracksColumnsVisibility.showDuration">
                    <div class="ellipsis" [ngClass]="{ 'accent-color': track.isPlaying }">
                        {{ track.durationInMilliseconds | formatTrackDuration }}
                    </div>
                </td>
                <td class="w-56px text-align-right-important" *ngIf="this.tracksColumnsVisibility.showNumber">
                    <div class="ellipsis" [ngClass]="{ 'accent-color': track.isPlaying }">
                        {{ track.number | zeroToBlank }}
                    </div>
                </td>
                <td class="w-56px" *ngIf="this.tracksColumnsVisibility.showYear">
                    <div class="ellipsis" [ngClass]="{ 'accent-color': track.isPlaying }">
                        {{ track.year | zeroToBlank }}
                    </div>
                </td>
                <td class="w-56px" *ngIf="this.tracksColumnsVisibility.showPlayCount">
                    <div class="ellipsis" [ngClass]="{ 'accent-color': track.isPlaying }">
                        {{ track.playCount }}
                    </div>
                </td>
                <td class="w-56px" *ngIf="this.tracksColumnsVisibility.showSkipCount">
                    <div class="ellipsis" [ngClass]="{ 'accent-color': track.isPlaying }">
                        {{ track.skipCount }}
                    </div>
                </td>
                <td *ngIf="this.tracksColumnsVisibility.showDateLastPlayed">
                    <div class="ellipsis" [ngClass]="{ 'accent-color': track.isPlaying }">
                        {{ track.dateLastPlayed | formatTicksToDateTimeString }}
                    </div>
                </td>
                <td *ngIf="this.tracksColumnsVisibility.showDateAdded">
                    <div class="ellipsis" [ngClass]="{ 'accent-color': track.isPlaying }">
                        {{ track.dateAdded | formatTicksToDateTimeString }}
                    </div>
                </td>
            </tr>
        </table>
    </cdk-virtual-scroll-viewport>
    <app-totals
        class="mt-3"
        [totalDurationInMilliseconds]="this.tracks.totalDurationInMilliseconds"
        [totalFileSizeInBytes]="this.tracks.totalFileSizeInBytes"
    ></app-totals>
</div>
